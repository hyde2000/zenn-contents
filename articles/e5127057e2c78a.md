---
title: "Solanaを理解する上で重要な用語5つを噛み砕いてみる"
emoji: "🛴"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["solana"]
published: false
---

# ✨ Solana の概要

![](/images/solana/solana-core.png)
Solana はオープンソースのパブリックチェーンです。
スケーリング問題を解決するブロックチェーンとして 2017 年に開発され、スマートコントラクト・NFT・dApps などに対応しています。

Solana が開発者に愛されるチェーンとなった理由としては、

- 高速なトランザクションスループット
  - **65,000** TPS(Transaction Per Second) の理論値を持つ
  - 現状は 2,700 TPS(2022/4/23 時点)なので、まだまだスケール可能
- トランザクションコストがほぼ 0
  | ネットワーク | 平均トランザクションコスト(2022/4/23 時点) |
  | ---- | ---- |
  | Bitcoin | $131.69 |
  | Ethereum | $2.6 |
  | Solana | $0.00025 |
  - この手数料の安さから『VISA に取って代わる決済システムになる』との期待
- Rust の人気上昇
  - Solana の`Program`（スマートコントラクト）は Rust で実装される
  - Rust は難易度が高く将来が期待できる言語であるため、情報感度の高い熟練したエンジニアを中心とした開発コミュニティを形成できた

このように Solana は将来を期待できるチェーンとして多くの開発者を集めています。

# 💬 Solana における重要用語

Solana における用語は、Ethereum などで使用される意味とは異なることが多いです。
そんな少しトリッキーながら Solana でよく使用される重要用語を私なりに噛み砕いて説明したいと思います。
（記事内容は [GitHub](https://github.com/hyde2000/zenn-contents/blob/main/articles/e5127057e2c78a.md) で管理していますので、修正リクエストなどは受け付けています！）

## Account

Solana における Account(アカウント)は 2 つに大別できます。

- Executable Account
  - Program(コントラクトロジック) を実行できるアカウント
  - 変更することができない
- Non-executable Account
  - いわゆる State を管理するアカウント
  - Owner だけがステートを変更できる
  - Wallet 残高・lamports など、変更可能なデータなどを保存

**Executable Account** は実行ロジックをバイトコードとして持っているものになります。
(Ethereum の EVM でいう Contract Account に近いイメージですね)
そしてこの Executable Account でのコントラクトを実行できるのは、その`owner`のみとなっています。
このアカウントはデプロイ後に中身を変更することができないので、完全に実行ロジックだけに責任を持つのです。

**Non-executable Account**はステートを管理することができるアカウントになります。
つまり、スマートコントラクトを実行してウォレット残高を増減させるような場合には `Non-executable Account` 内のステートを変更する必要があります。
そこで **Executable Account が Non-executable Account のオーナーになる**ことによって、そのステートを管理するわけですね。

![](/images/solana/solana-twitter-example.png)
*https://lorisleiva.com/ に素晴らしい例があったので引用*

こちらは Solana 版 Twitter の図解です。

1. `Solana-Twitter Program`という Executable なアカウントがデプロイされる
2. ↑ はデフォルトで`System Program`という Solana 公式が持つアカウントが Owner となる
3. 各 Tweet や User は Non-executable なアカウントとしてステートを持つ
4. Owner である Executable Account によって`Tweet`や`User`のステートが変更されていく
   | アカウント名 | 種類 |
   | ---------------------- | ---------------------- |
   | Solana-Twitter Program | Executable Account |
   | Tweet | Non-executable Account |
   | User | Non-executable Account |

つまり Solana チェーンでは、**すべての要素がアカウントとして存在する**のです。
これは他のブロックチェーンと異なった思想でしょう。

https://github.com/solana-labs/solana/blob/master/sdk/src/account.rs#L22-L34

ソースコードを見てみましょう。
Account 構造体のフィールドをざっくり説明すると、

| フィールド | 説明                                                     |
| ---------- | -------------------------------------------------------- |
| lamports   | SOL の最小単位(ETH でいう wei)がいくらストアされているか |
| data       | アカウントに含まれるデータ                               |
| owner      | アカウントのオーナーの公開鍵                             |
| executable | 実行可能かどうか                                         |
| rent_epoch | アカウントが Rent(家賃)を払う日時                        |

補足としては、

- Solana で使用される最小単位は`lamport`といい、1lamport = 0.000000001 SOL
- 各アカウントは`Rent`という家賃を払う必要があるため、lamports や rent_epoch というフィールドがある

**Rent**に関しては後に説明するため、ひとまず Account についてはこのくらい分かれば十分でしょう。

## Program
