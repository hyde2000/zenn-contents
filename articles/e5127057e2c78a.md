---
title: "Solanaã‚’ç†è§£ã™ã‚‹ä¸Šã§é‡è¦ãªç”¨èª5ã¤ã‚’å™›ã¿ç •ã„ã¦ã¿ã‚‹"
emoji: "ğŸ›´"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["solana"]
published: false
---

# âœ¨ Solana ã®æ¦‚è¦

![](/images/solana/solana-core.png)
Solana ã¯ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã§ã™ã€‚
ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å•é¡Œã‚’è§£æ±ºã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã¨ã—ã¦ 2017 å¹´ã«é–‹ç™ºã•ã‚Œã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãƒ»NFTãƒ»dApps ãªã©ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

Solana ãŒé–‹ç™ºè€…ã«æ„›ã•ã‚Œã‚‹ãƒã‚§ãƒ¼ãƒ³ã¨ãªã£ãŸç†ç”±ã¨ã—ã¦ã¯ã€

- é«˜é€Ÿãªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ
  - **65,000** TPS(Transaction Per Second) ã®ç†è«–å€¤ã‚’æŒã¤
  - ç¾çŠ¶ã¯ 2,700 TPS(2022/4/23 æ™‚ç‚¹)ãªã®ã§ã€ã¾ã ã¾ã ã‚¹ã‚±ãƒ¼ãƒ«å¯èƒ½
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚³ã‚¹ãƒˆãŒã»ã¼ 0
  | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ | å¹³å‡ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚³ã‚¹ãƒˆ(2022/4/23 æ™‚ç‚¹) |
  | ---- | ---- |
  | Bitcoin | $131.69 |
  | Ethereum | $2.6 |
  | Solana | $0.00025 |
  - ã“ã®æ‰‹æ•°æ–™ã®å®‰ã•ã‹ã‚‰ã€VISA ã«å–ã£ã¦ä»£ã‚ã‚‹æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ ã«ãªã‚‹ã€ã¨ã®æœŸå¾…
- Rust ã®äººæ°—ä¸Šæ˜‡
  - Solana ã®`Program`ï¼ˆã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆï¼‰ã¯ Rust ã§å®Ÿè£…ã•ã‚Œã‚‹
  - Rust ã¯é›£æ˜“åº¦ãŒé«˜ãå°†æ¥ãŒæœŸå¾…ã§ãã‚‹è¨€èªã§ã‚ã‚‹ãŸã‚ã€æƒ…å ±æ„Ÿåº¦ã®é«˜ã„ç†Ÿç·´ã—ãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ä¸­å¿ƒã¨ã—ãŸé–‹ç™ºã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’å½¢æˆã§ããŸ

ã“ã®ã‚ˆã†ã« Solana ã¯å°†æ¥ã‚’æœŸå¾…ã§ãã‚‹ãƒã‚§ãƒ¼ãƒ³ã¨ã—ã¦å¤šãã®é–‹ç™ºè€…ã‚’é›†ã‚ã¦ã„ã¾ã™ã€‚

# ğŸ’¬ Solana ã«ãŠã‘ã‚‹é‡è¦ç”¨èª

Solana ã«ãŠã‘ã‚‹ç”¨èªã¯ã€Ethereum ãªã©ã§ä½¿ç”¨ã•ã‚Œã‚‹æ„å‘³ã¨ã¯ç•°ãªã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚
ãã‚“ãªå°‘ã—ãƒˆãƒªãƒƒã‚­ãƒ¼ãªãŒã‚‰ Solana ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹é‡è¦ç”¨èªã‚’ç§ãªã‚Šã«å™›ã¿ç •ã„ã¦èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ï¼ˆè¨˜äº‹å†…å®¹ã¯ [GitHub](https://github.com/hyde2000/zenn-contents/blob/main/articles/e5127057e2c78a.md) ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã®ã§ã€ä¿®æ­£ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ã¯å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ï¼ï¼‰

## Account

> A record in the Solana ledger that either holds data or is an executable program.
> Like an account at a traditional bank, a Solana account may hold funds called lamports. Like a file in Linux, it is addressable by a key, often referred to as a public key or pubkey.
>
> (Solana å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ`terminology`ã‚ˆã‚Šå¼•ç”¨)

Solana ã«ãŠã‘ã‚‹ Account(ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ)ã¯ 2 ã¤ã«å¤§åˆ¥ã§ãã¾ã™ã€‚

- Executable Account
  - Program(ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãƒ­ã‚¸ãƒƒã‚¯) ã‚’å®Ÿè¡Œã§ãã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ããªã„
- Non-executable Account
  - ã„ã‚ã‚†ã‚‹ State ã‚’ç®¡ç†ã™ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - Owner ã ã‘ãŒã‚¹ãƒ†ãƒ¼ãƒˆã‚’å¤‰æ›´ã§ãã‚‹
  - Wallet æ®‹é«˜ãƒ»lamports ãªã©ã€å¤‰æ›´å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãªã©ã‚’ä¿å­˜

**Executable Account** ã¯å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã¨ã—ã¦æŒã£ã¦ã„ã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚
(Ethereum ã® EVM ã§ã„ã† Contract Account ã«è¿‘ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã­)
ãã—ã¦ã“ã® Executable Account ã§ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ã®ã¯ã€ãã®`owner`ã®ã¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚
ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«ä¸­èº«ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ã§ã€å®Œå…¨ã«å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã ã‘ã«è²¬ä»»ã‚’æŒã¤ã®ã§ã™ã€‚

**Non-executable Account**ã¯ã‚¹ãƒ†ãƒ¼ãƒˆã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãªã‚Šã¾ã™ã€‚
ã¤ã¾ã‚Šã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ®‹é«˜ã‚’å¢—æ¸›ã•ã›ã‚‹ã‚ˆã†ãªå ´åˆã«ã¯ `Non-executable Account` å†…ã®ã‚¹ãƒ†ãƒ¼ãƒˆã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã“ã§ **Executable Account ãŒ Non-executable Account ã®ã‚ªãƒ¼ãƒŠãƒ¼ã«ãªã‚‹**ã“ã¨ã«ã‚ˆã£ã¦ã€ãã®ã‚¹ãƒ†ãƒ¼ãƒˆã‚’ç®¡ç†ã™ã‚‹ã‚ã‘ã§ã™ã­ã€‚

### Solana-Twitter ã§ã®ä¾‹

![](/images/solana/solana-twitter-example.png)
*https://lorisleiva.com/ ã«ç´ æ™´ã‚‰ã—ã„ä¾‹ãŒã‚ã£ãŸã®ã§å¼•ç”¨*

ã“ã¡ã‚‰ã¯ Solana ç‰ˆ Twitter ã®å›³è§£ã§ã™ã€‚

1. `Solana-Twitter Program`ã¨ã„ã† Executable ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹
2. â†‘ ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`System Program`ã¨ã„ã† Solana å…¬å¼ãŒæŒã¤ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒ Owner ã¨ãªã‚‹
3. å„ Tweet ã‚„ User ã¯ Non-executable ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã—ã¦ã‚¹ãƒ†ãƒ¼ãƒˆã‚’æŒã¤
4. Owner ã§ã‚ã‚‹ Executable Account ã«ã‚ˆã£ã¦`Tweet`ã‚„`User`ã®ã‚¹ãƒ†ãƒ¼ãƒˆãŒå¤‰æ›´ã•ã‚Œã¦ã„ã
   | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå | ç¨®é¡ |
   | ---------------------- | ---------------------- |
   | Solana-Twitter Program | Executable Account |
   | Tweet | Non-executable Account |
   | User | Non-executable Account |

ã¤ã¾ã‚Š Solana ãƒã‚§ãƒ¼ãƒ³ã§ã¯ã€**ã™ã¹ã¦ã®è¦ç´ ãŒã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã—ã¦å­˜åœ¨ã™ã‚‹**ã®ã§ã™ã€‚
ã“ã‚Œã¯ä»–ã®ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã¨ç•°ãªã£ãŸæ€æƒ³ã§ã—ã‚‡ã†ã€‚

### ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

https://github.com/solana-labs/solana/blob/master/sdk/src/account.rs#L22-L34

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
Account æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã–ã£ãã‚Šèª¬æ˜ã™ã‚‹ã¨ã€

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | èª¬æ˜                                                     |
| ---------- | -------------------------------------------------------- |
| lamports   | SOL ã®æœ€å°å˜ä½(ETH ã§ã„ã† wei)ãŒã„ãã‚‰ã‚¹ãƒˆã‚¢ã•ã‚Œã¦ã„ã‚‹ã‹ |
| data       | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å«ã¾ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿                               |
| owner      | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚ªãƒ¼ãƒŠãƒ¼ã®å…¬é–‹éµ                             |
| executable | å®Ÿè¡Œå¯èƒ½ã‹ã©ã†ã‹                                         |
| rent_epoch | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒ Rent(å®¶è³ƒ)ã‚’æ‰•ã†æœŸé™                        |

è£œè¶³ã¨ã—ã¦ã¯ã€

- Solana ã®é€šè²¨ã§ä½¿ç”¨ã•ã‚Œã‚‹æœ€å°å˜ä½ã¯`lamport`ã¨ã„ã„ã€1lamport = 0.000000001 SOL
- å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯`Rent`ã¨ã„ã†å®¶è³ƒã‚’æ‰•ã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€lamports ã‚„ rent_epoch ã¨ã„ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹

**Rent**ã«é–¢ã—ã¦ã¯å¾Œã«èª¬æ˜ã™ã‚‹ãŸã‚ã€ã²ã¨ã¾ãš Account ã«ã¤ã„ã¦ã¯ã“ã®ãã‚‰ã„åˆ†ã‹ã‚Œã°ååˆ†ã§ã—ã‚‡ã†ã€‚

## Program

> The code that interprets instructions.
>
> (Solana å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ`terminology`ã‚ˆã‚Šå¼•ç”¨)

Program ã¯**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯**ã‚’è¡¨ã—ã¾ã™ã€‚
(ã„ã‚ã‚†ã‚‹ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã™ã­)

å…ˆã«ã€Solana ã§ã¯å…¨ã¦ãŒã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã—ã¦å­˜åœ¨ã™ã‚‹ã€ã¨è¨€ã„ã¾ã—ãŸãŒã€**Program ã‚‚ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä¸€ç¨®**ã§ã™ã€‚
Account ã®ã†ã¡ã€`executable`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ true ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ãŒ Program ã¨ã—ã¦èªè­˜ã•ã‚Œã¾ã™ã€‚

- Account ã®ä½œæˆ
- SOL ã‚’è»¢é€ã™ã‚‹
- ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã™ã‚‹
- Vote ã‚’ã™ã‚‹

ã¨ã„ã£ãŸå‹•ä½œãŒ Program ã«ã‚ˆã£ã¦å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ã­ï¼

### Anchor ã§ã®ä¾‹

[Anchor](https://project-serum.github.io/anchor/) ã¯ Solana ã«ãŠã‘ã‚‹ Program ã¨ãã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’é–‹ç™ºã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¾‹ã§ã™ã€‚

```rust
use anchor_lang::prelude::*;

declare_id!("Fg6PaFpoGXkYsidMpWTK6W2BeZ7FEfcYkg476zPFsLnS");

#[program]
mod basic_0 {
    use super::*;
    pub fn initialize(_ctx: Context<Initialize>) -> Result<()> {
        Ok(())
    }
}

#[derive(Accounts)]
pub struct Initialize {}
```

ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ç¤ºã•ã‚Œã¦ã„ã‚‹ä¾‹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€`#[program]`ã®ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆãŒã¤ã„ã¦ã„ã‚‹ã‚‚ã®ãŒ Program ã ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚
`basic_0`ã¨ã„ã† Program ã®ä¸­èº«ã«å…·ä½“çš„ãªå®Ÿè£…(RPC request handler)ã§ã‚ã‚‹`initialize`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¢ºèªã§ãã¾ã™ã€‚

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‹ã‚‰ã®å‘¼ã³å‡ºã—

```javascript
// Read the generated IDL.
const idl = JSON.parse(
  require("fs").readFileSync("./target/idl/basic_0.json", "utf8")
);

// Address of the deployed program.
const programId = new anchor.web3.PublicKey("<YOUR-PROGRAM-ID>");

// Generate the program client from IDL.
const program = new anchor.Program(idl, programId);

// Execute the RPC.
await program.rpc.initialize();
```

ç„¡äº‹ã« Program ãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰`initialize`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ã‚ã‘ã§ã™ã­ã€‚

## Instruction

> The smallest contiguous unit of execution logic in a program.
> An instruction specifies which program it is calling, which accounts it wants to read or modify, and additional data that serves as auxiliary input to the program.
> A client can include one or multiple instructions in a transaction. An instruction may contain one or more cross-program invocations.
>
> (Solana å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ`terminology`ã‚ˆã‚Šå¼•ç”¨)

Instruction(å‘½ä»¤) ã¯ Program ã«å«ã¾ã‚Œã‚‹å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã®æœ€å°å˜ä½ã§ã™ã€‚

### Anchor ã§ã®ä¾‹

```rust
#[program]
mod basic_1 {
    use super::*;

    pub fn initialize(ctx: Context<Initialize>, data: u64) -> Result<()> {
        let my_account = &mut ctx.accounts.my_account;
        my_account.data = data;
        Ok(())
    }

    pub fn update(ctx: Context<Update>, data: u64) -> Result<()> {
        let my_account = &mut ctx.accounts.my_account;
        my_account.data = data;
        Ok(())
    }
}

#[derive(Accounts)]
pub struct Initialize<'info> {
    #[account(init, payer = user, space = 8 + 8)]
    pub my_account: Account<'info, MyAccount>,
    #[account(mut)]
    pub user: Signer<'info>,
    pub system_program: Program<'info, System>,
}

#[derive(Accounts)]
pub struct Update<'info> {
    #[account(mut)]
    pub my_account: Account<'info, MyAccount>,
}

#[account]
pub struct MyAccount {
    pub data: u64,
}
```

ã“ã¡ã‚‰ã®ä¾‹ã§ã„ã†`initialize`ã‚„`update`ã¯ Instruction ã«ãªã‚Šã¾ã™ã€‚
Program ã®ä¸­ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€Instrution ã¯ã©ã® Program ãŒå‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹ã®ã‹ã‚’å†…éƒ¨ã‹ã‚‰çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãã—ã¦ã“ã‚Œã‚‰ Instruction ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨ Account ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã‚¹ãƒ†ãƒ¼ãƒˆãŒå¤‰æ›´ã•ã‚Œã¾ã™ã€‚
ãã®è¨¼æ‹ ã«`Inititalize`ã‚„`Update`ã¨ã„ã£ãŸ Account ãŒå®šç¾©ã•ã‚Œã€å¼•æ•°ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«æ¸¡ã•ã‚Œã¦ã„ã¾ã™ã‚ˆã­ã€‚

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®å‘¼ã³å‡ºã—

```javascript
// The program to execute.
const program = anchor.workspace.Basic1;

// The Account to create.
const myAccount = anchor.web3.Keypair.generate();

// Create the new account and initialize it with the program.
await program.rpc.initialize(new anchor.BN(1234), {
  accounts: {
    myAccount: myAccount.publicKey,
    user: provider.wallet.publicKey,
    systemProgram: SystemProgram.programId,
  },
  signers: [myAccount],
});
```

ãã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚‚å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚
RPC request handler ã¨ã—ã¦`initialize`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚Œã¦ã„ã¾ã™ã‚ˆã­ã€‚

### ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

https://github.com/solana-labs/solana/blob/master/sdk/program/src/instruction.rs#L324-L334

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã® Instrution æ§‹é€ ä½“ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | èª¬æ˜                                                                                      |
| ---------- | ----------------------------------------------------------------------------------------- |
| program_id | Program ã®å…¬é–‹éµã€‚ã©ã® Program ãªã‚‰æ­£ã—ã`data`ã‚’è§£é‡ˆã§ãã‚‹ã‹ã‚’ç¤ºã™                       |
| accounts   | å‚ç…§ã•ã‚Œã‚‹ Account ã‚’ä¸¦ã¹ãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿                                                     |
| data       | Program ã«æ¸¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã€‚å®Ÿè¡Œã™ã¹ãæ“ä½œãªã©ã‚’å«ã‚€(ç‰¹å®šã® Program ã ã‘ãŒä¸­èº«ã‚’è§£é‡ˆã§ãã‚‹) |

ã¤ã¾ã‚Šã“ã‚Œã‚‰ã‚’ã¾ã¨ã‚ã‚‹ã¨ã€

- Instrution ã¯ Program å†…ã®å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã®å˜ä½
- `program_id`ãŒæ¸¡ã•ã‚Œã‚‹ã®ã§ã€ã©ã® Program ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã¹ãã‹åˆ¤åˆ¥ã§ãã‚‹
- ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å®Ÿè¡Œã«ã‚ˆã‚Šã€ã‚¹ãƒ†ãƒ¼ãƒˆã‚’ç®¡ç†ã™ã‚‹ Account ã‚’æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ RPC ã§å®Ÿè¡Œå¯èƒ½

ã¨ã„ã†ã‚ã‘ã§ã™ã€‚ã‹ãªã‚Šå…¨ä½“åƒãŒç†è§£ã§ãã¦ãã¾ã—ãŸã‚ˆã­ï¼

## Transaction

> One or more instructions signed by a client using one or more keypairs and executed atomically with only two possible outcomes: success or failure.
>
> (Solana å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ`terminology`ã‚ˆã‚Šå¼•ç”¨)

Transaction ã¯**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å…¨ä½“åƒ**ã‚’ç¤ºã™ç”¨èªã§ã™ã€‚
ä»Šã¾ã§ã®ç”¨èªã‚’ç†è§£ã—ã¦ã„ã‚Œã°ã€Transaction ã®æµã‚ŒãŒã‚¹ãƒƒã‚­ãƒªåˆ†ã‹ã‚Šã¾ã™ã‚ˆã­ã€‚

![](/images/solana/solana-transaction.png)
_`Transaction flow throughout the network` [Solana WhitePaper](https://solana.com/solana-whitepaper.pdf)ã‚ˆã‚Šå¼•ç”¨_

1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒ Transaction ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã—ã€Solana ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸é€ã‚‰ã‚Œã‚‹
2. Solana ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã‚ˆã£ã¦ Instruction ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
3. Instruction ã¯ã©ã® Program ã‚„ Account ãŒé–¢ä¸ã™ã¹ãã‹ã‚’åˆ¤åˆ¥ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’é©åˆ‡ãª Program ã¸æ¸¡ã™
4. Program ã¯ Instruction ã‹ã‚‰å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹
5. Program ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®çµæœãŒ`success`ã‹`error`ã‹ã‚’è¿”ã™
6. ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«é–¢ã‚ã£ãŸ Account ã®`Owner`(æ‰€æœ‰è€…)ã¯å¤‰æ›´ã‚’æ‰¿èªã™ã‚‹ãŸã‚ã«ç½²åã‚’è¡Œã†
7. æ¤œè¨¼ãƒãƒ¼ãƒ‰ãŒ Transaction ã‚’æ‰¿èªã™ã‚‹

ã–ã£ãã‚Šã“ã®ã‚ˆã†ãªæµã‚Œã§ Transaction ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

### ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

https://github.com/solana-labs/solana/blob/master/sdk/src/transaction/mod.rs#L173-L190

Transaction æ§‹é€ ä½“ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | èª¬æ˜                                                    |
| ---------- | ------------------------------------------------------- |
| signatures | Account ãŒ Transaction ã®çµæœã‚’æ‰¿èªã—ãŸã“ã¨ã‚’ä¼ãˆã‚‹ç½²å |
| message    | Transaction ã®å…¨ä½“æƒ…å ±ã‚’ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ã¾ã¨ã‚ãŸã‚‚ã®        |

ã“ã®ã‚ˆã†ã«ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã®`message`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è©³ã—ãè¦‹ã‚‹ã¨[`MessageHeader`](https://github.com/solana-labs/solana/blob/master/sdk/program/src/message/mod.rs#L96-L110)æ§‹é€ ä½“ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãã®ãªã‹ã®`num_required_signatures`ã¨ã„ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ç¤ºã•ã‚ŒãŸæ•°å­—ã¨`signatures`ã®ç½²åæ•°ã¯ä¸€è‡´ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

## Rent
